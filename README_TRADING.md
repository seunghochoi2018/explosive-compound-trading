# SOXL/SOXS 자동매매 봇 사용 가이드

## ⚠️ 시작 전 필수 확인사항

### 1. USD 잔고 입금
현재 계좌에 **USD 잔고가 $0.00**입니다.

**해결 방법:**
1. 한국투자증권 MTS/HTS 접속
2. 해외주식 계좌로 **원화→달러 환전** 실행
3. 최소 $100 이상 입금 권장

### 2. 미국 장 거래 시간
봇은 **미국 장 개장 시간**에만 정상 작동합니다.

**거래 가능 시간 (한국 시간):**
- 여름: 22:30 ~ 05:00 (다음날)
- 겨울: 23:30 ~ 06:00 (다음날)

**현재 시간이 장 마감 시간이면:**
- 가격 조회는 가능하지만 실시간 거래 불가
- 다음 장 개장 시간에 재실행

## 📊 봇 설정

### 전략 파라미터
```python
STOP_LOSS = -0.03      # -3% 손절
TAKE_PROFIT = 0.05     # +5% 익절
POSITION_SIZE = 0.20   # 잔고의 20% 투자
CHECK_INTERVAL = 10    # 10초마다 체크
```

### 추세 판단 로직
- **상승장 (Bull)**: SOXL 매수
  - SOXL/SOXS 비율 > 5
- **하락장 (Bear)**: SOXS 매수
  - SOXL/SOXS 비율 < 3

## 🚀 실행 방법

### 1. 토큰 갱신
```bash
python refresh_kis_token.py
```

### 2. 봇 실행
```bash
python soxl_soxs_auto_trading.py
```

### 3. 실행 화면
```
======================================================================
=== SOXL/SOXS 추세돌파 자동매매 봇 시작 ===
======================================================================
[2025-10-06 22:30:00] 💵 USD 잔고: $500.00
[2025-10-06 22:30:00] 📦 보유 포지션: 0개
[2025-10-06 22:30:00] 🚀 자동매매 시작...

[2025-10-06 22:30:00] 가격 - SOXL: $25.50, SOXS: $8.20
[2025-10-06 22:30:00] 📊 현재 추세: BULL
[2025-10-06 22:30:00] 🎯 SOXL 매수 준비: 3주 ($100.00)
[2025-10-06 22:30:01] ✅ SOXL 매수 성공: 3주 @ $25.50
```

## 📈 수익 현황 (30초마다 표시)

```
======================================================================
📈 수익 현황
======================================================================
초기 잔고:     $500.00
현재 잔고:     $400.00
포지션 평가액: $150.00
총 자산:       $550.00
──────────────────────────────────────────────────────────────────────
실현 수익:     $30.00
미실현 수익:   $20.00
총 수익:       $50.00
수익률:        +10.00%
거래 횟수:     5회
======================================================================
```

## 🛑 봇 중지

**Ctrl + C** 누르면 안전하게 종료됩니다.
- 현재 포지션은 유지됨
- 최종 수익 현황 표시

## ⚙️ 설정 변경

### 손절/익절 비율 조정
`soxl_soxs_auto_trading.py` 파일 수정:
```python
STOP_LOSS = -0.05      # -5% 손절 (더 여유있게)
TAKE_PROFIT = 0.10     # +10% 익절 (더 큰 수익)
```

### 투자 비율 조정
```python
POSITION_SIZE = 0.10   # 잔고의 10% (보수적)
POSITION_SIZE = 0.30   # 잔고의 30% (공격적)
```

### 체크 주기 조정
```python
CHECK_INTERVAL = 5     # 5초 (빠른 대응)
CHECK_INTERVAL = 30    # 30초 (여유있게)
```

## 🔍 트러블슈팅

### "추세 감지 실패" 반복
→ 장 마감 시간입니다. 다음 개장 시간에 재실행

### "USD 잔고: $0.00"
→ 달러 환전 필요 (위 1번 참고)

### "토큰 로드 실패"
→ `python refresh_kis_token.py` 실행

### 네트워크 오류
→ 인터넷 연결 확인, VPN 사용 시 해제

## 📝 주의사항

1. **실전 투자 전 충분히 테스트**
2. **손실 감수 가능한 금액만 투자**
3. **변동성이 큰 레버리지 ETF 특성 이해**
4. **장 개장 시간 확인 필수**
5. **주기적으로 수익/손실 모니터링**

## 🎯 추천 사용 시나리오

### 보수적 전략
- 포지션 크기: 10%
- 손절: -2%, 익절: +3%
- 예상 월 수익: +20-50%

### 공격적 전략
- 포지션 크기: 30%
- 손절: -5%, 익절: +10%
- 예상 월 수익: +100-300%

---

**행운을 빕니다! 🚀**
