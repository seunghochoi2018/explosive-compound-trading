# NVIDIA 자동매매 시스템 사용 가이드

## 📈 시스템 개요

이더 트레이더와 유사한 구조로 만들어진 NVIDIA 주식 전용 자동매매 시스템입니다.

### 🎯 주요 특징

1. **AI 기반 분석**: LLM이 시장 상황을 직접 분석하여 거래 결정
2. **변경 가능한 주기**: 분석 주기를 자유롭게 설정 가능
3. **두 가지 전략**:
   - **NVDA**: 양방향 거래 (매수/매도)
   - **NVDL**: 롱 전용 (2x 레버리지 ETF)

## 🚀 시스템 구성

### 1. NVDA 주식 트레이더 (`nvidia_stock_trader.py`)
- **전략**: 양방향 거래
- **분석 주기**: 60초 (변경 가능)
- **리스크 관리**:
  - 손절: -5%
  - 익절: +10%
- **최소 신뢰도**: 70%

### 2. NVDL 롱 전용 트레이더 (`nvdl_long_trader.py`)
- **전략**: 롱 포지션 전용
- **분석 주기**: 120초 (변경 가능)
- **리스크 관리**:
  - 트레일링 스톱: -15%
  - 최대 손절: -20%
- **최소 신뢰도**: 75%
- **분할 매수**: 3단계 피라미딩

## ⚙️ 설정 방법

### 1. KIS API 설정

`nvidia_config.json` 파일에서 다음 정보를 입력:

```json
{
  "kis_app_key": "YOUR_KIS_APP_KEY",
  "kis_app_secret": "YOUR_KIS_APP_SECRET",
  "account_num": "YOUR_ACCOUNT_NUMBER",
  "account_code": "01"
}
```

### 2. 한국투자증권 API 신청
- [한국투자증권 KIS Developers](https://apiportal.koreainvestment.com/) 접속
- 계좌 개설 및 API 신청
- 모의투자 또는 실계좌 선택
- API Key 및 Secret 발급

### 3. 미국 주식 거래 권한
- 해외주식 거래 신청
- NASDAQ 거래 권한 확인

## 🎮 실행 방법

### 방법 1: 배치 파일 실행
```bash
start_nvidia_trading.bat
```

### 방법 2: 직접 실행
```bash
# NVDA 트레이더
python nvidia_stock_trader.py

# NVDL 롱 트레이더
python nvdl_long_trader.py
```

## 📊 트레이딩 로직

### NVDA 트레이더
```
LLM 분석 → 신뢰도 체크 → 거래 결정 → 리스크 관리
- 매수신호 > 매도신호 + 신뢰도 70%+ → 매수
- 매도신호 > 매수신호 + 신뢰도 70%+ → 매도
- 손익률 체크 → 자동 손절/익절
```

### NVDL 롱 트레이더
```
LLM 분석 → 롱 전용 신호 → 분할 매수/매도 → 트레일링 스톱
- 매수신호 80%+ + 리스크 LOW/MEDIUM → 분할 매수
- 청산신호 70%+ → 부분 매도
- 청산신호 85%+ → 전량 매도
- 트레일링 스톱으로 수익 보호
```

## 🛡️ 리스크 관리

### 공통 리스크 관리
- **신뢰도 기반 필터링**: 낮은 신뢰도 신호 무시
- **포지션 크기 제한**: 계좌 대비 적정 크기 유지
- **시간 기반 청산**: 과도한 보유 방지

### NVDA 전용
- 고정 손절/익절
- 양방향 거래로 리스크 분산

### NVDL 전용
- 트레일링 스톱으로 수익 보호
- 분할 매수로 평균 단가 개선
- 롱 전용으로 방향성 집중

## 📈 성능 모니터링

### 실시간 표시 정보
- 현재가 및 포지션 상태
- 실시간 손익 (달러/퍼센트)
- 계좌 잔고 및 총자산
- LLM 분석 결과 및 신뢰도

### 로그 정보
- 모든 거래 기록
- AI 분석 결과
- 리스크 관리 이벤트

## ⚠️ 주의사항

### 1. API 제한
- 한국투자증권 API 호출 제한 확인
- 과도한 호출 방지

### 2. 시장 시간
- 미국 주식 시장 시간 (한국 시간 23:30-06:00)
- 장 마감 시간 거래 불가

### 3. 리스크 관리
- 투자 원금 보호를 위한 적절한 포지션 크기
- 과도한 레버리지 주의 (특히 NVDL)

### 4. 모의투자 권장
- 실거래 전 충분한 모의투자 테스트
- 시스템 안정성 확인

## 🔧 설정 최적화

### 분석 주기 조정
- **짧은 주기 (30-60초)**: 빠른 반응, 높은 빈도
- **긴 주기 (120-300초)**: 안정적, 노이즈 감소

### 신뢰도 임계값 조정
- **높은 임계값 (80%+)**: 보수적, 안전
- **낮은 임계값 (60%+)**: 적극적, 기회 확대

### 포지션 크기 조정
- 계좌 크기 대비 적절한 비율 설정
- 리스크 허용도에 따른 조정

## 📞 문제 해결

### 자주 발생하는 문제

1. **API 연결 오류**
   - API 키 확인
   - 네트워크 연결 확인
   - 계좌 권한 확인

2. **LLM 분석 실패**
   - Ollama 서버 실행 확인
   - 모델 다운로드 확인

3. **주문 실패**
   - 계좌 잔고 확인
   - 거래 권한 확인
   - 시장 개장 시간 확인

### 로그 확인
- 시스템이 출력하는 모든 메시지 확인
- 오류 메시지를 통한 문제 진단

## 🚀 향후 개선 계획

- 백테스팅 시스템 추가
- 텔레그램 알림 기능
- 다양한 미국 주식 지원
- 포트폴리오 관리 기능

---

**면책조항**: 이 시스템은 교육 및 연구 목적으로 제공됩니다. 실제 투자 시 발생하는 손실에 대해 책임지지 않습니다. 충분한 테스트 후 신중하게 사용하세요.