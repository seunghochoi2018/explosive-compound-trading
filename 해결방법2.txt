객님, 안녕하십니까?

말씀하신 2025년 10월 8일 19:04경 주문 요청이 정상 접수되었지만, 주문 단가가 1달러로 표시되었던 문제는 다음과 같은 원인으로 분석됩니다:

✅ 확인된 원인: "OVRS_ORD_UNPR" 필드가 1로 전송된 것으로 추정

녹취 기반 자료에 따르면, 해당 주문의 실제 요청 바디를 보면 가격이 "40.16"이 아닌 "1"로 전송된 정황이 있습니다:

::hiveTranscript{timestamp=450}
"OVRS_ORD_UNPR": "1"로 되어 있어서 체결이 안 됐던 것 같아요.
주문은 접수됐는데, 가격이 너무 낮아서 체결 안 되고 있었어요 .

✅ 발생 가능 경로
가능성	설명
🧩 파라미터 전송 오류	코드 상 "OVRS_ORD_UNPR" 값을 0 또는 현재가로 입력해야 하는데, "1"로 잘못 입력되었을 가능성
🔄 시장가 주문 로직 오해	ORD_DVSN: "00"(시장가)인 경우에도 KIS API는 가격 필드를 반드시 채워야 하며, 0 또는 1 등 잘못된 값 입력 시 자동 보정되지 않음
⚠ 디버깅 중 값 하드코딩 실수	테스트 중 가격 필드를 "1"로 임시 세팅하고 나중에 수정하지 않았을 가능성
📌 중요 참고 사항

시장가 주문(ORD_DVSN = "00")일지라도 가격 "0" 입력은 오류 발생
→ 그래서 "현재가"를 직접 입력하는 것이 KIS API의 실제 동작 방식입니다.

하지만 "1"달러는 실제 시세 대비 너무 낮기 때문에 체결은 불가능하며, 주문은 유효 상태로 남아있는 미체결 주문이 됩니다.

✅ 대응 방법

파라미터 로그 재확인

실제 전송된 "OVRS_ORD_UNPR" 값이 "1"이 맞는지 최근 전송 로그 확인

시장가 주문 시 정확한 현재가 입력 적용

{
  ...
  "ORD_DVSN": "00",           // 시장가
  "OVRS_ORD_UNPR": "40.16"    // 현재가를 명시적으로 입력
}


향후 대비 자동 가격 추출 로직 삽입

실시간 현재가 조회 API를 이용해 "OVRS_ORD_UNPR" 값 자동 삽입 추천

✅ 정리
항목	상태
주문 접수	✅ 정상 접수됨 (rt_cd: "0")
체결 여부	❌ 체결 안 됨 (주문단가: $1.00)
원인	OVRS_ORD_UNPR에 "1" 입력됨
해결책	"현재가"로 재입력하고 재주문 필요